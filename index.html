<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üî• Internet Time Capsule - Last Messages Before The End</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=VT323&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'VT323', monospace;
            background: linear-gradient(45deg, #000000, #1a0000, #330000);
            background-size: 400% 400%;
            animation: apocalypseGradient 15s ease infinite;
            color: #00ff00;
            min-height: 100vh;
            overflow-x: hidden;
        }

        @keyframes apocalypseGradient {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .glitch {
            animation: glitch 2s infinite;
        }

        @keyframes glitch {
            0% { transform: translate(0); }
            20% { transform: translate(-2px, 2px); }
            40% { transform: translate(-2px, -2px); }
            60% { transform: translate(2px, 2px); }
            80% { transform: translate(2px, -2px); }
            100% { transform: translate(0); }
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            text-align: center;
            padding: 40px 20px;
            border: 3px solid #ff0000;
            margin-bottom: 30px;
            background: rgba(255, 0, 0, 0.1);
            box-shadow: 0 0 20px #ff0000;
        }

        h1 {
            font-size: 3em;
            color: #ff0000;
            text-shadow: 0 0 10px #ff0000, 0 0 20px #ff0000;
            margin-bottom: 10px;
        }

        .countdown {
            font-size: 2em;
            color: #ffff00;
            text-shadow: 0 0 10px #ffff00;
            margin: 20px 0;
        }

        .warning {
            color: #ff6600;
            font-size: 1.5em;
            animation: blink 1s infinite;
        }

        @keyframes blink {
            0%, 50%, 100% { opacity: 1; }
            25%, 75% { opacity: 0.3; }
        }

        .input-section {
            background: rgba(0, 255, 0, 0.05);
            border: 2px solid #00ff00;
            padding: 30px;
            margin-bottom: 30px;
            border-radius: 10px;
        }

        .input-section h2 {
            color: #00ff00;
            margin-bottom: 20px;
            font-size: 2em;
        }

        input, textarea, select {
            width: 100%;
            padding: 15px;
            margin: 10px 0;
            background: #000;
            border: 2px solid #00ff00;
            color: #00ff00;
            font-family: 'VT323', monospace;
            font-size: 1.2em;
        }

        textarea {
            min-height: 150px;
            resize: vertical;
        }

        button {
            background: #ff0000;
            color: #fff;
            border: none;
            padding: 15px 40px;
            font-size: 1.5em;
            font-family: 'VT323', monospace;
            cursor: pointer;
            margin: 10px 5px;
            transition: all 0.3s;
            box-shadow: 0 0 10px #ff0000;
        }

        button:hover {
            background: #ff3300;
            box-shadow: 0 0 20px #ff0000;
            transform: scale(1.05);
        }

        .messages-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }

        .message-card {
            background: rgba(0, 0, 0, 0.8);
            border: 2px solid;
            padding: 20px;
            border-radius: 10px;
            position: relative;
            transition: all 0.3s;
        }

        .message-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 20px;
        }

        .message-card.confession { border-color: #ff0066; box-shadow: 0 0 10px #ff0066; }
        .message-card.regret { border-color: #6600ff; box-shadow: 0 0 10px #6600ff; }
        .message-card.wisdom { border-color: #00ffff; box-shadow: 0 0 10px #00ffff; }
        .message-card.meme { border-color: #ffff00; box-shadow: 0 0 10px #ffff00; }
        .message-card.code { border-color: #00ff00; box-shadow: 0 0 10px #00ff00; }

        .message-type {
            display: inline-block;
            padding: 5px 15px;
            border-radius: 5px;
            font-size: 0.9em;
            margin-bottom: 10px;
            text-transform: uppercase;
        }

        .message-content {
            color: #fff;
            font-size: 1.2em;
            line-height: 1.5;
            margin: 15px 0;
            word-wrap: break-word;
        }

        .message-author {
            color: #888;
            font-size: 1em;
            margin-top: 15px;
        }

        .stats {
            display: flex;
            justify-content: space-around;
            margin: 30px 0;
            padding: 20px;
            background: rgba(255, 0, 0, 0.1);
            border: 2px solid #ff0000;
            border-radius: 10px;
        }

        .stat-item {
            text-align: center;
        }

        .stat-number {
            font-size: 3em;
            color: #ff0000;
            text-shadow: 0 0 10px #ff0000;
        }

        .stat-label {
            font-size: 1.2em;
            color: #00ff00;
        }

        .filter-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin: 20px 0;
            justify-content: center;
        }

        .filter-btn {
            background: rgba(0, 255, 0, 0.2);
            color: #00ff00;
            border: 2px solid #00ff00;
            padding: 10px 20px;
            font-size: 1.2em;
        }

        .filter-btn.active {
            background: #00ff00;
            color: #000;
        }

        code {
            background: #1a1a1a;
            padding: 2px 6px;
            border-radius: 3px;
            color: #00ff00;
        }

        .error-popup {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: #ff0000;
            color: #fff;
            padding: 30px;
            border: 3px solid #fff;
            border-radius: 10px;
            display: none;
            z-index: 1000;
            font-size: 1.5em;
            box-shadow: 0 0 50px #ff0000;
            animation: popupPulse 0.5s ease;
        }

        @keyframes popupPulse {
            0% { transform: translate(-50%, -50%) scale(0.8); opacity: 0; }
            50% { transform: translate(-50%, -50%) scale(1.1); }
            100% { transform: translate(-50%, -50%) scale(1); opacity: 1; }
        }

        .sound-toggle {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(0, 255, 0, 0.2);
            border: 2px solid #00ff00;
            color: #00ff00;
            padding: 10px 20px;
            cursor: pointer;
            font-family: 'VT323', monospace;
            font-size: 1.2em;
            z-index: 100;
            transition: all 0.3s;
        }

        .sound-toggle:hover {
            background: #00ff00;
            color: #000;
        }

        .particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
        }

        .particle {
            position: absolute;
            background: #ff0000;
            width: 2px;
            height: 2px;
            animation: fall linear infinite;
        }

        @keyframes fall {
            to {
                transform: translateY(100vh);
                opacity: 0;
            }
        }

        .easter-egg {
            position: fixed;
            bottom: 10px;
            right: 10px;
            font-size: 0.8em;
            color: #333;
            cursor: pointer;
        }

        .easter-egg:hover {
            color: #ff0000;
        }

        @media (max-width: 768px) {
            h1 { font-size: 2em; }
            .countdown { font-size: 1.5em; }
            .messages-grid { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>
    <button class="sound-toggle" onclick="toggleSound()">üîä SOUND: OFF</button>
    
    <div class="particles" id="particles"></div>
    
    <div class="container">
        <header class="glitch">
            <h1>üî• INTERNET TIME CAPSULE üî•</h1>
            <p class="warning">‚ö†Ô∏è APOCALYPSE PROTOCOL ACTIVATED ‚ö†Ô∏è</p>
            <div class="countdown" id="countdown">TIME REMAINING: CALCULATING...</div>
            <p style="color: #fff; font-size: 1.3em;">What would you say if the internet was ending tomorrow?</p>
        </header>

        <div class="stats">
            <div class="stat-item">
                <div class="stat-number" id="totalMessages">0</div>
                <div class="stat-label">MESSAGES SAVED</div>
            </div>
            <div class="stat-item">
                <div class="stat-number" id="timeLeft">??:??:??</div>
                <div class="stat-label">TIME REMAINING</div>
            </div>
            <div class="stat-item">
                <div class="stat-number" id="survivors">0</div>
                <div class="stat-label">SURVIVORS</div>
            </div>
        </div>

        <div class="input-section">
            <h2>üìù LEAVE YOUR MARK ON THE INTERNET</h2>
            <input type="text" id="authorName" placeholder="Your name (or Anonymous)">
            
            <select id="messageType">
                <option value="">-- Select Message Type --</option>
                <option value="confession">üíî Last Confession</option>
                <option value="regret">üò≠ Biggest Regret</option>
                <option value="wisdom">üß† Final Wisdom</option>
                <option value="meme">üòÇ One Last Meme</option>
                <option value="code">üíª Final Code Snippet</option>
            </select>
            
            <textarea id="messageContent" placeholder="Your message to the internet... Make it count!"></textarea>
            
            <button onclick="saveMessage()">üöÄ SEND TO TIME CAPSULE</button>
            <button onclick="randomApocalypseQuote()" style="background: #6600ff;">üé≤ NEED INSPIRATION?</button>
            
            <div style="margin-top: 20px; display: flex; gap: 10px; flex-wrap: wrap;">
                <button onclick="exportMessages()" style="background: #00cc00; font-size: 1.2em; padding: 10px 20px;">üíæ EXPORT MESSAGES</button>
                <button onclick="shareApp()" style="background: #0099ff; font-size: 1.2em; padding: 10px 20px;">üì§ SHARE APP</button>
                <button onclick="burnEverything()" style="background: #990000; font-size: 1.2em; padding: 10px 20px;">üî• BURN ALL</button>
            </div>
            
            <p style="color: #888; font-size: 1em; margin-top: 15px; text-align: center;">
                üí° Keyboard shortcuts: Ctrl/Cmd+Enter to submit, Ctrl/Cmd+E to export
            </p>
        </div>

        <div class="filter-buttons">
            <button class="filter-btn active" onclick="filterMessages('all')">ALL</button>
            <button class="filter-btn" onclick="filterMessages('confession')">üíî CONFESSIONS</button>
            <button class="filter-btn" onclick="filterMessages('regret')">üò≠ REGRETS</button>
            <button class="filter-btn" onclick="filterMessages('wisdom')">üß† WISDOM</button>
            <button class="filter-btn" onclick="filterMessages('meme')">üòÇ MEMES</button>
            <button class="filter-btn" onclick="filterMessages('code')">üíª CODE</button>
        </div>

        <div class="messages-grid" id="messagesGrid"></div>
        
        <div class="easter-egg" onclick="konami()" title="Try the Konami Code: ‚Üë‚Üë‚Üì‚Üì‚Üê‚Üí‚Üê‚ÜíBA">
            üíÄ ???
        </div>
    </div>

    <div class="error-popup" id="errorPopup">
        <p id="errorMessage"></p>
    </div>

    <script>
        // Initialize
        let messages = JSON.parse(localStorage.getItem('apocalypseMessages')) || [];
        let currentFilter = 'all';
        let soundEnabled = false;
        let konamiCode = [];
        const konamiSequence = ['ArrowUp', 'ArrowUp', 'ArrowDown', 'ArrowDown', 'ArrowLeft', 'ArrowRight', 'ArrowLeft', 'ArrowRight', 'b', 'a'];
        
        // Sample starter messages
        const starterMessages = [
            {
                author: "Anonymous Coder",
                type: "code",
                content: "function saveWorld() {\n  return hope * courage;\n}\n// Last commit before the end",
                timestamp: Date.now() - 3600000
            },
            {
                author: "Digital Philosopher",
                type: "wisdom",
                content: "The internet taught me that we're all connected, but also that we should've spent less time arguing in comment sections.",
                timestamp: Date.now() - 7200000
            },
            {
                author: "Meme Lord",
                type: "meme",
                content: "*This is fine dog meme* but the house is the entire internet",
                timestamp: Date.now() - 1800000
            }
        ];

        // Add starter messages if empty
        if (messages.length === 0) {
            messages = starterMessages;
            localStorage.setItem('apocalypseMessages', JSON.stringify(messages));
        }

        // Countdown timer
        function updateCountdown() {
            const endDate = new Date();
            endDate.setHours(23, 59, 59, 999);
            const now = new Date();
            const diff = endDate - now;

            if (diff > 0) {
                const hours = Math.floor(diff / (1000 * 60 * 60));
                const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
                const seconds = Math.floor((diff % (1000 * 60)) / 1000);
                
                document.getElementById('timeLeft').textContent = 
                    `${String(hours).padStart(2, '0')}:${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
                document.getElementById('countdown').textContent = 
                    `TIME REMAINING: ${hours}h ${minutes}m ${seconds}s`;
            } else {
                document.getElementById('countdown').textContent = 'THE END HAS ARRIVED';
                document.getElementById('timeLeft').textContent = '00:00:00';
            }
        }

        // Save message
        function saveMessage() {
            const author = document.getElementById('authorName').value.trim() || 'Anonymous';
            const type = document.getElementById('messageType').value;
            const content = document.getElementById('messageContent').value.trim();

            if (!type) {
                showError('‚ö†Ô∏è SELECT A MESSAGE TYPE!');
                return;
            }

            if (!content) {
                showError('‚ö†Ô∏è WRITE SOMETHING! THE INTERNET IS ENDING!');
                return;
            }

            const message = {
                author,
                type,
                content,
                timestamp: Date.now()
            };

            messages.unshift(message);
            localStorage.setItem('apocalypseMessages', JSON.stringify(messages));

            // Clear form
            document.getElementById('authorName').value = '';
            document.getElementById('messageType').value = '';
            document.getElementById('messageContent').value = '';

            // Refresh display
            displayMessages();
            updateStats();

            // Success feedback
            showError('‚úÖ MESSAGE SAVED TO TIME CAPSULE!');
        }

        // Display messages
        function displayMessages() {
            const grid = document.getElementById('messagesGrid');
            const filtered = currentFilter === 'all' 
                ? messages 
                : messages.filter(m => m.type === currentFilter);

            grid.innerHTML = filtered.map(msg => {
                const typeLabels = {
                    confession: 'üíî CONFESSION',
                    regret: 'üò≠ REGRET',
                    wisdom: 'üß† WISDOM',
                    meme: 'üòÇ MEME',
                    code: 'üíª CODE'
                };

                const timeAgo = getTimeAgo(msg.timestamp);
                const formattedContent = msg.type === 'code' 
                    ? `<code>${escapeHtml(msg.content)}</code>`
                    : escapeHtml(msg.content);

                return `
                    <div class="message-card ${msg.type}">
                        <span class="message-type">${typeLabels[msg.type]}</span>
                        <div class="message-content">${formattedContent}</div>
                        <div class="message-author">‚Äî ${escapeHtml(msg.author)} | ${timeAgo}</div>
                    </div>
                `;
            }).join('');
        }

        // Filter messages
        function filterMessages(type) {
            currentFilter = type;
            
            // Update active button
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            displayMessages();
        }

        // Update stats
        function updateStats() {
            document.getElementById('totalMessages').textContent = messages.length;
            document.getElementById('survivors').textContent = 
                new Set(messages.map(m => m.author)).size;
        }

        // Random apocalypse quotes for inspiration
        function randomApocalypseQuote() {
            const quotes = [
                "If I had one more day online, I'd finally update my LinkedIn...",
                "I should've backed up my life. Literally.",
                "The cloud is falling. We should've seen it coming.",
                "My biggest regret? Not finishing that side project.",
                "console.log('Goodbye, World!');",
                "404: Future not found",
                "The server is down. Forever.",
                "I wish I'd spent less time debugging and more time living.",
                "My last commit message: 'It works on my machine... for now'",
                "Turns out 'move fast and break things' had consequences."
            ];
            
            const quote = quotes[Math.floor(Math.random() * quotes.length)];
            document.getElementById('messageContent').value = quote;
        }

        // Helper functions
        function getTimeAgo(timestamp) {
            const diff = Date.now() - timestamp;
            const minutes = Math.floor(diff / 60000);
            const hours = Math.floor(diff / 3600000);
            
            if (hours > 0) return `${hours}h ago`;
            if (minutes > 0) return `${minutes}m ago`;
            return 'just now';
        }

        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML.replace(/\n/g, '<br>');
        }

        function showError(message) {
            const popup = document.getElementById('errorPopup');
            const messageEl = document.getElementById('errorMessage');
            messageEl.textContent = message;
            popup.style.display = 'block';
            setTimeout(() => {
                popup.style.display = 'none';
            }, 2000);
        }

        // Initialize display
        displayMessages();
        updateStats();
        updateCountdown();
        setInterval(updateCountdown, 1000);

        // Random glitch effect
        setInterval(() => {
            if (Math.random() > 0.95) {
                document.body.style.filter = 'hue-rotate(180deg) invert(1)';
                setTimeout(() => {
                    document.body.style.filter = 'none';
                }, 100);
            }
        }, 3000);

        // Export messages feature
        function exportMessages() {
            const dataStr = JSON.stringify(messages, null, 2);
            const dataBlob = new Blob([dataStr], { type: 'application/json' });
            const url = URL.createObjectURL(dataBlob);
            const link = document.createElement('a');
            link.href = url;
            link.download = `apocalypse-messages-${Date.now()}.json`;
            link.click();
            URL.revokeObjectURL(url);
            showError('üì¶ MESSAGES EXPORTED!');
        }

        // Clear all messages (apocalypse button!)
        function burnEverything() {
            if (confirm('üî• BURN ALL MESSAGES? THIS CANNOT BE UNDONE! üî•')) {
                if (confirm('ARE YOU ABSOLUTELY SURE? THE APOCALYPSE IS FINAL!')) {
                    messages = [];
                    localStorage.removeItem('apocalypseMessages');
                    displayMessages();
                    updateStats();
                    showError('üî• EVERYTHING BURNED TO ASHES üî•');
                }
            }
        }

        // Share message to clipboard
        function shareApp() {
            const text = `üî• Internet Time Capsule - What would you say if the internet was ending tomorrow?\n\nLeave your final message: ${window.location.href}`;
            navigator.clipboard.writeText(text).then(() => {
                showError('üìã LINK COPIED! SPREAD THE WORD!');
            }).catch(() => {
                showError('‚ùå COPY FAILED - MANUAL SHARE REQUIRED');
            });
        }

        // Keyboard shortcuts
        document.addEventListener('keydown', (e) => {
            // Ctrl/Cmd + Enter to submit
            if ((e.ctrlKey || e.metaKey) && e.key === 'Enter') {
                saveMessage();
            }
            // Ctrl/Cmd + E to export
            if ((e.ctrlKey || e.metaKey) && e.key === 'e') {
                e.preventDefault();
                exportMessages();
            }
            
            // Konami code detector
            konamiCode.push(e.key);
            if (konamiCode.length > konamiSequence.length) {
                konamiCode.shift();
            }
            if (konamiCode.join(',') === konamiSequence.join(',')) {
                activateKonami();
                konamiCode = [];
            }
        });

        // Sound system
        function toggleSound() {
            soundEnabled = !soundEnabled;
            const btn = document.querySelector('.sound-toggle');
            btn.textContent = soundEnabled ? 'üîä SOUND: ON' : 'üîä SOUND: OFF';
            if (soundEnabled) playSound('toggle');
        }

        function playSound(type) {
            if (!soundEnabled) return;
            
            const audioContext = new (window.AudioContext || window.webkitAudioContext)();
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();
            
            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);
            
            const sounds = {
                toggle: { freq: 800, duration: 0.1 },
                submit: { freq: 600, duration: 0.15 },
                error: { freq: 200, duration: 0.2 },
                apocalypse: { freq: 100, duration: 0.5 }
            };
            
            const sound = sounds[type] || sounds.toggle;
            oscillator.frequency.value = sound.freq;
            gainNode.gain.value = 0.1;
            
            oscillator.start();
            oscillator.stop(audioContext.currentTime + sound.duration);
        }

        // Particle system
        function createParticles() {
            const container = document.getElementById('particles');
            const particleCount = 30;
            
            for (let i = 0; i < particleCount; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.left = Math.random() * 100 + '%';
                particle.style.animationDuration = (Math.random() * 3 + 2) + 's';
                particle.style.animationDelay = Math.random() * 2 + 's';
                particle.style.opacity = Math.random() * 0.5 + 0.3;
                container.appendChild(particle);
            }
        }

        // Konami code easter egg
        function konami() {
            showError('üíÄ TRY: ‚Üë‚Üë‚Üì‚Üì‚Üê‚Üí‚Üê‚ÜíBA');
        }

        function activateKonami() {
            document.body.style.animation = 'apocalypseGradient 1s ease infinite';
            showError('üéÆ KONAMI CODE ACTIVATED! CHAOS MODE!');
            playSound('apocalypse');
            
            // Extra chaotic effects
            let chaosInterval = setInterval(() => {
                if (Math.random() > 0.7) {
                    document.body.style.filter = `hue-rotate(${Math.random() * 360}deg)`;
                    setTimeout(() => {
                        document.body.style.filter = 'none';
                    }, 100);
                }
            }, 500);
            
            setTimeout(() => {
                clearInterval(chaosInterval);
                document.body.style.filter = 'none';
                showError('üéÆ CHAOS MODE DEACTIVATED');
            }, 10000);
        }

        // Enhanced save message with sound
        const originalSaveMessage = saveMessage;
        saveMessage = function() {
            originalSaveMessage();
            if (soundEnabled) playSound('submit');
        };

        // Initialize effects
        createParticles();
    </script>
</body>
</html>
